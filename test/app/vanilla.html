<html>

<head>
  <title>Prebid.js integration example</title>
  <script>
    var PREBID_TIMEOUT = 700;

    var adUnits = [{
      name: "/61424206/90sKidsOnly_BTF_MPU2",
      code: "/61424206/90sKidsOnly_BTF_MPU2",
      div: "div-gpt-ad-1487764907032-4",
      sizes: [
        [300, 250]
      ],
      bids: [{
        bidder: "pubmatic",
        params: {
          publisherId: "120658",
          adSlot: "90sKidsOnly_BTF_MPU2@300x250"
        }
      }, {
        bidder: "openx",
        params: {
          jstag_url: "",
          unit: "538807798",
          pgid: "",
          delDomain: "potential-d.openx.net",
          customParams: ""
        }
      }, {
        bidder: "appnexusAst",
        params: {
          placementId: 11230950
        }
      }, {
        bidder: "rubicon",
        params: {
          rp_account: "",
          rp_site: "",
          rp_zonesize: "",
          accountId: "15848",
          siteId: "130746",
          zoneId: "726048",
          sizes: "",
          keywords: "",
          inventory: "",
          visitor: "",
          position: "",
          userId: ""
        }
      }, {
        bidder: "sovrn",
        params: {
          tagid: "458177",
          sizes: ""
        }
      }],
      serverBids: [],
      enabled: !0,
      clientEnabled: !0,
      serverEnabled: !0,
      holisticResequencer: !1,
      hardFloor: 0
    }, {
      name: "/61424206/90sKidsOnly_BTF_MPU1",
      code: "/61424206/90sKidsOnly_BTF_MPU1",
      div: "div-gpt-ad-1487764907032-3",
      sizes: [
        [300, 250]
      ],
      bids: [{
        bidder: "openx",
        params: {
          jstag_url: "",
          unit: "538807796",
          pgid: "",
          delDomain: "potential-d.openx.net",
          customParams: ""
        }
      }, {
        bidder: "pubmatic",
        params: {
          publisherId: "120658",
          adSlot: "90sKidsOnly_BTF_MPU1@300x250"
        }
      }, {
        bidder: "appnexusAst",
        params: {
          placementId: 11230948
        }
      }, {
        bidder: "rubicon",
        params: {
          rp_account: "",
          rp_site: "",
          rp_zonesize: "",
          accountId: "15848",
          siteId: "130746",
          zoneId: "726050",
          sizes: "",
          keywords: "",
          inventory: "",
          visitor: "",
          position: "",
          userId: ""
        }
      }, {
        bidder: "sovrn",
        params: {
          tagid: "458176",
          sizes: ""
        }
      }],
      serverBids: [],
      enabled: !0,
      clientEnabled: !0,
      serverEnabled: !0,
      holisticResequencer: !1,
      hardFloor: 0
    }, {
      name: "/61424206/90sKidsOnly_ATF_MPU1",
      code: "/61424206/90sKidsOnly_ATF_MPU1",
      div: "div-gpt-ad-1487764907032-1",
      sizes: [
        [300, 600],
        [300, 250]
      ],
      bids: [{
        bidder: "openx",
        params: {
          jstag_url: "",
          unit: "538807793",
          pgid: "",
          delDomain: "potential-d.openx.net",
          customParams: ""
        }
      }, {
        bidder: "appnexusAst",
        params: {
          placementId: 11230941
        }
      }, {
        bidder: "pubmatic",
        params: {
          publisherId: "120658",
          adSlot: "90sKidsOnly_ATF_MPU1@300x600"
        }
      }, {
        bidder: "rubicon",
        params: {
          rp_account: "",
          rp_site: "",
          rp_zonesize: "",
          accountId: "15848",
          siteId: "130746",
          zoneId: "726052",
          sizes: "",
          keywords: "",
          inventory: "",
          visitor: "",
          position: "",
          userId: ""
        }
      }, {
        bidder: "sovrn",
        params: {
          tagid: "458173",
          sizes: ""
        }
      }],
      serverBids: [],
      enabled: !0,
      clientEnabled: !0,
      serverEnabled: !0,
      holisticResequencer: !1,
      hardFloor: 0
    }, {
      name: "/61424206/90sKidsOnly_ATF_MPU2",
      code: "/61424206/90sKidsOnly_ATF_MPU2",
      div: "div-gpt-ad-1487764907032-2",
      sizes: [
        [300, 250],
        [300, 600]
      ],
      bids: [{
        bidder: "pubmatic",
        params: {
          publisherId: "120658",
          adSlot: "90sKidsOnly_ATF_MPU2@300x600"
        }
      }, {
        bidder: "openx",
        params: {
          jstag_url: "",
          unit: "538807795",
          pgid: "",
          delDomain: "potential-d.openx.net",
          customParams: ""
        }
      }, {
        bidder: "sovrn",
        params: {
          tagid: "458175",
          sizes: ""
        }
      }, {
        bidder: "appnexusAst",
        params: {
          placementId: 11230947
        }
      }, {
        bidder: "rubicon",
        params: {
          rp_account: "",
          rp_site: "",
          rp_zonesize: "",
          accountId: "15848",
          siteId: "130746",
          zoneId: "726054",
          sizes: "",
          keywords: "",
          inventory: "",
          visitor: "",
          position: "",
          userId: ""
        }
      }],
      serverBids: [],
      enabled: !0,
      clientEnabled: !0,
      serverEnabled: !0,
      holisticResequencer: !1,
      hardFloor: 0
    }, {
      name: "/61424206/90sKidsOnly_BTF_BU",
      code: "/61424206/90sKidsOnly_BTF_BU",
      div: "div-gpt-ad-1487764907032-5",
      sizes: [
        [300, 250]
      ],
      bids: [{
        bidder: "pubmatic",
        params: {
          publisherId: "120658",
          adSlot: "90sKidsOnly_BTF_BU@300x250"
        }
      }, {
        bidder: "openx",
        params: {
          jstag_url: "",
          unit: "538807799",
          pgid: "",
          delDomain: "potential-d.openx.net",
          customParams: ""
        }
      }, {
        bidder: "sovrn",
        params: {
          tagid: "458178",
          sizes: ""
        }
      }, {
        bidder: "appnexusAst",
        params: {
          placementId: 11230952
        }
      }, {
        bidder: "rubicon",
        params: {
          rp_account: "",
          rp_site: "",
          rp_zonesize: "",
          accountId: "15848",
          siteId: "130746",
          zoneId: "726058",
          sizes: "",
          keywords: "",
          inventory: "",
          visitor: "",
          position: "",
          userId: ""
        }
      }],
      serverBids: [],
      enabled: !0,
      clientEnabled: !0,
      serverEnabled: !0,
      holisticResequencer: !1,
      hardFloor: 0
    }];

    var pbjs = pbjs || {};
    pbjs.que = pbjs.que || [];
  </script>

  <script>
    (function() {
      var d = document,
        pbs = d.createElement('script');
      pbs.type = 'text/javascript';
      pbs.src = '../../build/dev/prebid.js';
      var target = document.getElementsByTagName('head')[0];
      target.insertBefore(pbs, target.firstChild);
    })();

    pbjs.que.push(function() {
      pbjs.setConfig({ debug: true });
      pbjs.addAdUnits(adUnits);
      pbjs.bidderSettings = {
        standard: {
          adserverTargeting: [{
            key: "hb_bidder",
            val: function(e) {
              return e.bidderCode
            }
          }, {
            key: "hb_adid",
            val: function(e) {
              return e.adId
            }
          }, {
            key: "hb_pb",
            val: function(e) {
              var t, n = e.cpm;
              switch (!0) {
                case n >= 30:
                  return 30;
                case n >= 15:
                  t = .05;
                  break;
                case n >= 10:
                  t = .01;
                  break;
                case n >= 5:
                  t = .01;
                  break;
                case n >= .05:
                  t = .01;
                  break;
                default:
                  return 0
              }
              return n
            }
          }]
        }
      }
      pbjs.requestBids({
        bidsBackHandler: sendAdserverRequest
      });
    });

    function sendAdserverRequest() {
      if (window.pbjs.adserverRequestSent) return;
      window.pbjs.que.push(function() {
        var targeting = pbjs.getAdserverTargeting();
        console.log(targeting)
        if (typeof targeting !== 'object') return;
        var adUnitCodes = Object.keys(targeting);
        for (var i=0;i<adUnitCodes.length;i++) {
          var adUnitCode = adUnitCodes[i];
          var params = targeting[adUnitCode];
          console.log(adUnitCode)
          var iframe = document.getElementById(adUnitCode);
          if (params && params['hb_adid']) {
            window.pbjs.renderAd(iframe.contentWindow.document, params['hb_adid']);
          }
        }
      });
    }
  </script>
</head>

<body>
  <h2>Vanilla Prebid.js Test</h2>

  <iframe id='div-gpt-ad-1487764907032-1' FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="0" HEIGHT="0"></iframe>

  <iframe id='div-gpt-ad-1487764907032-2' FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="0" HEIGHT="0"></iframe>

  <iframe id='div-gpt-ad-1487764907032-3' FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="0" HEIGHT="0"></iframe>

  <iframe id='div-gpt-ad-1487764907032-4' FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="0" HEIGHT="0"></iframe>

  <iframe id='div-gpt-ad-1487764907032-5' FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="0" HEIGHT="0"></iframe>

  <script type="text/javascript">
    //Send data from prebid.js automatically
    pbjs.que.push(function() {
      pbjs.enableAnalytics({
        provider: '37x',
        options: {
          organizationId: 'rpovbpJ5suZ',
          siteId: 'fJkgD9zG5ep'
        }
      });
    });
  </script>

</body>

</html>
